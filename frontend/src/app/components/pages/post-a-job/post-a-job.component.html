<div class="page-title-area">
    <div class="d-table">
        <div class="d-table-cell">
            <div class="container">
                <div class="page-title-text">
                    <h2>Publicar un trabajo</h2>
                    <ul>
                        <li><a routerLink="/">Flexy</a></li>
                        <li><i class="icofont-simple-right"></i></li>
                        <li>Publicar un trabajo</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<form #f="ngForm">
    <select name="state" ngModel>
      <option value="" disabled>Choose a state</option>
      <option *ngFor="let state of states" [ngValue]="state">
        {{ state.abbrev }}
      </option>
    </select>
  </form>

  <p>Form value: {{ f.value | json }}</p>
  <!-- example value: {state: {name: 'New York', abbrev: 'NY'} } -->
<div class="post-job-area pt-100">
    <div class="container">
        <div class="post-job-item">
            <form [formGroup]="postjobForm">
                <div class="post-job-heading">
                    <h2>Publica tu trabajo</h2>
                </div>

                <div class="row">
                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Título del trabajo</label>
                                <input type="text" formControlName="titulo" class="form-control" placeholder="Mozo">
                                <div *ngIf="titulo.invalid && (titulo.dirty || titulo.touched)" class="text-danger">
                                    <div *ngIf="titulo.errors?.['required']">Título requerido.</div>
                                </div>
                            </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Categoría del trabajo</label>
                            <div class="job-category-area">
                                <select formControlName="categoria">
                                    <option value="" disabled>Selecciona una categoría</option>
                                    <option [value]="opcion.id_categoria" *ngFor="let opcion of opciones">{{ opcion.nombre }}</option>
                                </select>                              
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="form-group">
                            <label>Ubicación</label>
                            <input type="text" formControlName="direccion" class="form-control" placeholder="Urb. Los Rosales Mz. F. Lt-03">
                            <div *ngIf="direccion.invalid && (direccion.dirty || direccion.touched)" class="text-danger">
                                <div *ngIf="direccion.errors?.['required']">Dirección requerida.</div>
                            </div>  
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="form-group">
                            <div class="job-currency-area">
                                <label>¿Cuánto pagarás?</label>
                                <input formControlName="precio" type="text" class="form-control" placeholder="50">
                                <select disabled>
                                    <option selected>SOLES</option>
                                </select>	
                                <div *ngIf="precio.invalid && (precio.dirty || precio.touched)" class="text-danger">
                                    <div *ngIf="precio.errors?.['required']">Pago requerido.</div>
                                </div>  
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="form-group">
                            <div class="job-category-area">
                                <label>¿Para quién es este trabajo?</label>
                                <select formControlName="genero" name="genero" id="genero">
                                    <option value="" selected disabled>Seleccionar género</option>
                                    <option value="V">Varón</option>
                                    <option value="M">Mujer</option>
                                    <option value="C">Cualquiera</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="form-group">
                            <label>¿Cuál es la duración del trabajo?</label>
                            <input formControlName="tiempo" type="text" class="form-control" placeholder="2 horas">
                            <div *ngIf="tiempo.invalid && (tiempo.dirty || tiempo.touched)" class="text-danger">
                                <div *ngIf="tiempo.errors?.['required']">Tiempo requerido.</div>
                            </div>  
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <div class="form-group">
                            <label>Fecha límite</label>
                            <input formControlName="fecha_fin" type="date" class="form-control">
                            <div *ngIf="fecha_fin.invalid && (fecha_fin.dirty || fecha_fin.touched)" class="text-danger">
                                <div *ngIf="fecha_fin.errors?.['required']">Fecha requerida.</div>
                            </div>  
                        </div>
                    </div>

                    <div class="col-lg-12">
                        <div class="form-group">
                            <label>Describe el trabajo:</label>
                            <textarea formControlName="descripcion" id="descripcion" rows="8" class="form-control"></textarea>
                            <div *ngIf="descripcion.invalid && (descripcion.dirty || descripcion.touched)" class="text-danger">
                                <div *ngIf="descripcion.errors?.['required']">Descripción requerida.</div>
                            </div>  
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="form-group">
                            <label>Añade una ubicación más precisa:</label>
                            <div id="map" style="height: 400px;"></div>
                            <div *ngIf="!u_latitud || !u_longitud" class="text-danger">
                                Seleccione una ubicación en el mapa.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn create-ac-btn" (click)="saveJob()">Publicar</button>
                </div>
            </form>
        </div>
    </div>
</div>